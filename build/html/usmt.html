
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>User State Migration Tool ‘USMT’ &#8212; Base de Conhecimento 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Dicas de bash, linha de comando para uso diário." href="bash.html" />
    <link rel="prev" title="Bem-Vindo a “Base de Conhecimento do Tyuatsu”" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="bash.html" title="Dicas de bash, linha de comando para uso diário."
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Bem-Vindo a “Base de Conhecimento do Tyuatsu”"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Base de Conhecimento 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="user-state-migration-tool-usmt">
<h1>User State Migration Tool ‘USMT’<a class="headerlink" href="#user-state-migration-tool-usmt" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A Ferramenta de Migração de Estado do Usuário é um programa utilitário de linha de comando desenvolvido pela Microsoft que permite que os usuários se sintam à vontade com linguagens de script para transferir arquivos e configurações entre PCs com Windows.</p>
</div>
<div class="section" id="procedimento">
<h2>Procedimento<a class="headerlink" href="#procedimento" title="Permalink to this headline">¶</a></h2>
<p>Instalação:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Baixe o adksetup.exe pelo site: `docs.microsoft.com &lt;https://docs.microsoft.com/en-us/windows-hardware/get-started/adk-install&gt;`_.
</pre></div>
</div>
</div>
</div>
<div class="section" id="observacao">
<h1>Observação:<a class="headerlink" href="#observacao" title="Permalink to this headline">¶</a></h1>
<p>Nesse exemplo usaremos windows adk, para sistema windows 10 professional.</p>
<p>Apos a execução do <strong>adksetup.exe</strong> vamos escolher a segunda opção: <strong>download features for installation on a separate computer</strong></p>
<p>Escolha o local de instalação em <strong>C:ADK-Offline</strong>, e após o seu download, copie esta pasta para um pendrive, pois iremos usá-la para instalar em máquinas sem necessidade de conexão com a internet, manteremos tudo no modo offline.</p>
<div class="section" id="instalar-o-usmt">
<h2>Instalar o USMT<a class="headerlink" href="#instalar-o-usmt" title="Permalink to this headline">¶</a></h2>
<p>Entre na pasta ADK-Offline e execute o adksetup.exe e coloque no local de instalação o caminho:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\<span class="n">ADK</span>
</pre></div>
</div>
<p>Escolha a primeira opção e em seguida selecione a ferramenta no caso, apenas o usmt.</p>
</div>
<div class="section" id="iniciar-o-processo-do-usmt-na-maquina-alvo">
<h2>Iniciar o processo do usmt na máquina alvo:<a class="headerlink" href="#iniciar-o-processo-do-usmt-na-maquina-alvo" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">O teste à seguir foi feito no meu Oracle VM VirtualBOX</p>
</div>
<ol class="arabic">
<li><p class="first">mapear a pasta compartilhada o qual irar armazenar o perfil do usuario:</p>
<p>net use e: \vboxsrvandre</p>
<p>mkdir e:Downloadsbackup_user</p>
</li>
<li><p class="first">Iniciar o processo do usmt:</p>
<p>cd “C:ADKAssessment and Deployment KitUser State Migration Toolamd64”</p>
<p>scanstate.exe e:Downloadsbackup_user /ue:<em>* /ui:</em>andre /i:miguser.xml /i:migapp.xml /o /c /nocompress</p>
<p>ou</p>
<p>scanstate.exe \vboxsrvandreDownloadsbackup_user /ue:<em>* /ui:</em>andre /i:miguser.xml /i:migapp.xml /o /c /nocompress</p>
</li>
</ol>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/capture-1-scanstate.png"><img alt="Snipping Tool Capture Scanstate" src="_images/capture-1-scanstate.png" style="width: 511.8px; height: 251.4px;" /></a>
</div>
</div>
</div>
<div class="section" id="obs">
<h1>OBS:<a class="headerlink" href="#obs" title="Permalink to this headline">¶</a></h1>
<p>Isso Irá criar uma pasta nova chamada <strong>USMT</strong> em e:Downloadsbackup_user.</p>
<ol class="arabic" start="3">
<li><p class="first">Restore do perfil em outra máquina, instale o ADK (não esqueça de selecionar apenas o usmt):</p>
<p>cd “C:ADKAssessment and Deployment KitUser State Migration Toolamd64”</p>
<p>loadstate e:Downloadsbackup_user /ue:<em>* /ui:</em>andre /i:miguser.xml /i:migapp.xml /nocompress</p>
<p>ou</p>
<p>loadstate.exe \vboxsrvandreDownloadsbackup_userUSMT/ue:<em>* /ui:</em>andre /i:miguser.xml /i:migapp.xml /nocompress</p>
</li>
</ol>
<div class="figure align-center">
<a class="reference internal image-reference" href="capture-1-loadstate.png"><img alt="Snipping Tool Capture Loadstate" src="capture-1-loadstate.png" /></a>
</div>
<p>Faça um logon com o usuário andre e veja se tudo está ok (email, imagens, documentos, favoritos, icones, atalhos e etc..).</p>
</div>
<div class="section" id="consideracoes-finais">
<h1>Consideracoes Finais:<a class="headerlink" href="#consideracoes-finais" title="Permalink to this headline">¶</a></h1>
<p>No windows 8.1 professional, foi necessário reconfigurar o wallpaper e a foto do login do usuário… mas do resto, como ícones e área de trabalho estavam OK! bem como emails, docs e images.</p>
<p>Caso a máquina esteja ingressado num Domain, tanto a máquina alvo como a de destino, devem estar sempre no mesmo domain ou grupo de trabalho, antes de se iniciar o restore do loadstate do perfil do usuário!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Caso queira utilizar a migração com mais segurança, podemos usar a criptografia.</p>
</div>
</div>
<div class="section" id="veja-um-exemplo-abaixo">
<h1>Veja um exemplo abaixo:<a class="headerlink" href="#veja-um-exemplo-abaixo" title="Permalink to this headline">¶</a></h1>
<p>Migração completa do perfil do usuário chamado <strong>lidiane</strong>, no windows 10 x64 (hostname notedell). iremos migrá-la para outra máquina, tbm com windows 10 x64 e (hostname note-sam).</p>
<div class="section" id="realizar-a-copia-critografada-do-perfil-completo-da-maquina">
<h2>Realizar a cópia critografada do perfil completo da máquina.<a class="headerlink" href="#realizar-a-copia-critografada-do-perfil-completo-da-maquina" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Instale o software <strong>adksetup.exe</strong> em ambas as máquinas!</li>
</ol>
<p>(notedell):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">elevate</span> <span class="n">cmd</span> <span class="n">administrator</span>

<span class="n">cd</span> <span class="n">C</span><span class="p">:</span>\<span class="n">User</span> <span class="n">State</span> <span class="n">Migration</span> <span class="n">Tool</span>\<span class="n">arm64</span>

<span class="n">conecte</span> <span class="n">o</span> <span class="n">hd</span> <span class="n">externo</span> <span class="p">(</span><span class="n">e</span><span class="p">:)</span> <span class="n">ou</span> <span class="n">se</span> <span class="n">estiver</span> <span class="n">em</span> <span class="n">rede</span> <span class="n">mapeia</span> <span class="n">para</span> <span class="n">o</span> <span class="n">seu</span> <span class="n">fileserver</span><span class="p">:</span>

<span class="n">mkdir</span> <span class="n">e</span><span class="p">:</span>\<span class="n">notelidiane</span>\<span class="n">perfilmigration</span>

<span class="n">scanstate</span><span class="o">.</span><span class="n">exe</span> <span class="n">e</span><span class="p">:</span>\<span class="n">notelidiane</span>\<span class="n">perfilmigration</span> <span class="o">/</span><span class="n">ue</span><span class="p">:</span><span class="o">*</span>\<span class="o">*</span> <span class="o">/</span><span class="n">ui</span><span class="p">:</span><span class="o">*</span>\<span class="n">Lidia</span> <span class="o">/</span><span class="n">i</span><span class="p">:</span><span class="n">migapp</span><span class="o">.</span><span class="n">xml</span> <span class="o">/</span><span class="n">i</span><span class="p">:</span><span class="n">miguser</span><span class="o">.</span><span class="n">xml</span> <span class="o">/</span><span class="n">i</span><span class="p">:</span><span class="n">migdocs</span><span class="o">.</span><span class="n">xml</span> <span class="o">/</span><span class="n">v</span><span class="p">:</span><span class="mi">5</span> <span class="o">/</span><span class="n">vsc</span> <span class="o">/</span><span class="n">encrypt</span> <span class="o">/</span><span class="n">key</span><span class="p">:</span><span class="n">delldalidiane10</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Restaurar o perfil em outra máquina.</li>
</ol>
<p>(note-sam):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">elevate</span> <span class="n">cmd</span> <span class="n">administrator</span>

<span class="n">cd</span> <span class="n">C</span><span class="p">:</span>\<span class="n">User</span> <span class="n">State</span> <span class="n">Migration</span> <span class="n">Tool</span>\<span class="n">arm64</span>

<span class="n">conecte</span> <span class="n">o</span> <span class="n">hd</span> <span class="n">externo</span> <span class="p">(</span><span class="n">e</span><span class="p">:)</span> <span class="n">ou</span> <span class="n">se</span> <span class="n">estiver</span> <span class="n">em</span> <span class="n">rede</span> <span class="n">mapeia</span> <span class="n">para</span> <span class="n">o</span> <span class="n">seu</span> <span class="n">fileserver</span><span class="p">:</span>

<span class="n">loadstate</span><span class="o">.</span><span class="n">exe</span> <span class="n">e</span><span class="p">:</span>\<span class="n">notelidiane</span>\<span class="n">perfilmigration</span> <span class="o">/</span><span class="n">ue</span><span class="p">:</span><span class="o">*</span>\<span class="o">*</span> <span class="o">/</span><span class="n">ui</span><span class="p">:</span><span class="o">*</span>\<span class="n">Lidia</span> <span class="o">/</span><span class="n">i</span><span class="p">:</span><span class="n">migapp</span><span class="o">.</span><span class="n">xml</span> <span class="o">/</span><span class="n">i</span><span class="p">:</span><span class="n">miguser</span><span class="o">.</span><span class="n">xml</span> <span class="o">/</span><span class="n">i</span><span class="p">:</span><span class="n">migdocs</span><span class="o">.</span><span class="n">xml</span> <span class="o">/</span><span class="n">v</span><span class="p">:</span><span class="mi">13</span> <span class="o">/</span><span class="n">lae</span> <span class="o">/</span><span class="n">lac</span><span class="p">:</span><span class="mi">12345678</span> <span class="o">/</span><span class="n">decrypt</span> <span class="o">/</span><span class="n">key</span><span class="p">:</span><span class="n">delldalidiane10</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Desconecte o hd externo e reinicie o computador. Faça um logon com o usuário lidiane e veja se tudo está ok (email, imagens, documentos, favoritos, icones, atalhos e etc..)</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">User State Migration Tool ‘USMT’</a><ul>
<li><a class="reference internal" href="#procedimento">Procedimento</a></li>
</ul>
</li>
<li><a class="reference internal" href="#observacao">Observação:</a><ul>
<li><a class="reference internal" href="#instalar-o-usmt">Instalar o USMT</a></li>
<li><a class="reference internal" href="#iniciar-o-processo-do-usmt-na-maquina-alvo">Iniciar o processo do usmt na máquina alvo:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#obs">OBS:</a></li>
<li><a class="reference internal" href="#consideracoes-finais">Consideracoes Finais:</a></li>
<li><a class="reference internal" href="#veja-um-exemplo-abaixo">Veja um exemplo abaixo:</a><ul>
<li><a class="reference internal" href="#realizar-a-copia-critografada-do-perfil-completo-da-maquina">Realizar a cópia critografada do perfil completo da máquina.</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Bem-Vindo a “Base de Conhecimento do Tyuatsu”</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="bash.html"
                        title="next chapter">Dicas de bash, linha de comando para uso diário.</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/usmt.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="bash.html" title="Dicas de bash, linha de comando para uso diário."
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Bem-Vindo a “Base de Conhecimento do Tyuatsu”"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Base de Conhecimento 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Tyuatsu.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>